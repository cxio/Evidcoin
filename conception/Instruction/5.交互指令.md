# 交互指令

用于脚本与外部交互，交互通过「缓存区」实现。

缓存区是一个先进先出（FIFO）的队列，从头部取数据。导入和导出各自独立。


## 定义

指令码区间：`[46-49]`，4个。

```go
码值    指令字      说明
-----------------------------------------------------------
46      INPUT(1)    导入
        // 从缓存区导入数据（阻塞）。
        // 如果缓存区无值或数量不足，执行失败并正常退出。
        // 附参：读取的条目数，0值表示全部。
        // 实参：无。
        // 返回值：不定数量。自动展开到目标位置。
        // 例：
        // @INPUT       导入缓存区全部数据展开到实参区。
        // INPUT[3]     导入缓存取头部3项数据，展开入栈。
        // @INPUT NOP   清空缓存区。
        //
        // 设计：
        // 导入失败按正常退出对待，通关状态有效。
        // 因此前面若已正常通关，此处的失败并不影响通过性。
        //
        // 对于公共验证节点来说，这是一种隐式的 END。
        // 因为公共验证节点不会导入任何数据。

47      OUTPUT      导出
        // 把实参区的数据导出到缓存区，维持原始顺序。
        // 非阻塞操作。
        // 实参：不定数量。
        // 例：
        // @POPS OUTPUT 数据栈全部内容导出
        // ... OUTPUT   若实参区为空，导出0项数据

48      BUFDUMP(1)  数据转出
        // 将OUTPUT的缓存区内容转出（清空），无阻塞操作。
        // 附参：标识值。
        // 标识由用户定义，可用于标记数据转出点的位置。
        // 接收者可能需要这样的信息。
        // 实参：无。
        // 例：
        // @POPS[3] OUTPUT BUFDUMP
        // 弹出栈顶3项数据到实参区 => 导出到缓存区 => 转出清空
        //
        // 注：
        // 外部需要注册处理器。
        // 处理器是第三方私有逻辑，只有需要的节点才用部署。

49      PRINT       打印（控制台）
        // 输出实参区的内容到控制台。
        // 实参：不定数量。
        // 例：
        // @TOP PRINT       打印栈顶项
        // @POPS[3] PRINT   打印栈顶3项数据
        // 注：
        // 即调用 fmt.Println()，用默认的格式打印。
```
