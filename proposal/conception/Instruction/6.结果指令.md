# 结果指令

本类指令会产生决定性的结果，比如*通关*检查、逻辑*跳转*、函数*返回*或脚本结束等。


## 定义

指令码区间：`[50-56]`，7个。

```go
码值    指令字      说明
----------------------------------------------------------
50      PASS        通关（安检）
        // 实参为true时通过，设置通关状态，继续。
        // 实参为false时通关失败，结束脚本。
        // 实参：布尔值。
        // 返回值：无。
        // 提示：
        // 多个PASS类似于“And" 的逻辑，每一个都需成功。
        //
        // 实现：
        // 通关失败可能触发某种通知机制，以便外部了解情况。

51      CHECK       检查（安检）
        // 实参为true时通过，为false时标记失败。
        // 与PASS相同的通关检查，但失败不会退出。
        // 实参：布尔值。
        // 返回值：无。
        // 注意：
        // 通关状态会被后续的CHECK覆盖，因此实际上取决于最后一个CHECK。
        // 这有点类似于“Or”的逻辑。
        //
        // 设计：
        // 在正常结束脚本时，系统会检查通关状态来判定是否通过。

52      GOTO(~,64,~)    跳转（独立）
        // 跳转到某个交易的输出脚本。
        // - 实参区数据传递到新脚本作为数据栈初始内容。
        // - 新脚本延续当前的校验，但有其自身的环境（数据栈、实参区、全局变量区），
        //   但共享导入/导出缓存区。
        // - 新脚本中的通关状态也为当前脚本的通过状态。
        // 附参1：交易年度（按交易时间戳计算）。
        // 附参2：交易ID。
        // 附参3：输出项序位。
        // 实参：不定数量。
        // 返回值：无。
        // 例：
        //      @POPS[5] GOTO[2025, 0xab93cf..., 1]
        // 提取栈顶5项数据，
        // 跳转到2025年的 0xab93cf...交易的第2项输出，传递实参为其数据栈初始内容。

53      EMBED(~,64,~)   嵌入（合并）
        // 嵌入某个交易的输出脚本。
        // 目标脚本为合并逻辑，共享当前的脚本域（数据栈、实参区、全局变量区）。
        // 附参1：交易年度（按交易时间戳计算）。
        // 附参2：交易ID。
        // 附参3：输出项序位。
        // 实参：无。
        // 返回值：无。
        // 例：
        //      EMBED[2025, 0xab93cf..., 0] FN_HASH256 DATA{...} ...
        // 提取2025年某交易的首个输出项脚本，嵌入并执行，
        // 之后取栈顶值计算哈希摘要（FN_HASH256）……
        // 注意：
        // 取脚本用于执行，所以脚本可以向当前数据栈中添加内容。

54      EXIT        结束脚本
        // 脚本至此被终止执行并退出。
        // 退出前，系统会检查通关状态以判断验证是否通过。
        // 实参：任意单值，可选。
        // 返回值：即实参值。
        // 如果实参区有值，返回该值（到系统，可能会被处理）。
        // 如果实参区无值，则仅简单结束。
        // 注：
        // 本指令通常出现在IF语句块内，但在顶层也可使用。

55      RETURN      函数返回
        // 从函数子块中退出，并返回一个值。
        // 仅用于函数式语句块 MAP{} 和 FILTER{} 中，退出当前迭代。
        // 实参：任意单值，可选。
        // 返回值：即实参值，无实参时返回nil。

56      END         公共验证结束
        // 公共验证逻辑结束，脚本退出。
        // 仅限于公共验证节点，其它私有用途的节点会忽略它。
        // 注：
        // 对公共验证节点来说，该指令类似于EXIT。
        //
        // 例：定向加密：
        // - 交易者A先发布自己的公钥到链上。
        // - 交易者B用A的公钥创建共享密钥，加密数据后连同自己的公钥一并发布。
        // - 交易者A用B的公钥重构共享密钥，解密数据。
        // 解释：
        // 这种数据仅对交易者A有意义，因此需提前结束公共验证。
        //
        // 设计：
        // 私有监听需要借助于开放式的公共发布触达私有监听节点。
        // 私有处理通常需要包含公共验证的逻辑（部分）。
```
